 select * from (  SELECT  st.IndentType,stn.minorunit ConsumeUnit,DATE_FORMAT(stn.Expirydate , '%d-%b-%Y')Expirydate,IFNULL(stn.barcodeno,'')barcodeno, (SELECT location FROM st_locationmaster WHERE locationid=st.FromLocationID) FromLocation, (SELECT location FROM st_locationmaster WHERE locationid=st.ToLocationID) ToLocation, DATE_FORMAT(dtEntry,'%d-%b-%Y') IndentDate,st.IndentNo,cat.CategoryTypeName,subcat.SubCategoryTypeName, itg.`ItemNameGroup` ItemName, sm.ManufactureName Manufacture,sm.MachineName Machine,sm.PackSize, trimzero(ReqQty)ReqQty,trimzero(CheckedQty)CheckedQty,trimzero(if(ApprovedQty=0,if(CheckedQty=0,ReqQty,CheckedQty),ApprovedQty)) ApprovedQty, (SELECT SUM(sendqty) FROM   `st_indentissuedetail` ss where ss.itemid=st.itemid and ss.indentno=st.indentno) IssueQty,  trimzero(st.Rate)Rate,trimzero(st.DiscountPer)DiscountPer,trimzero(TaxPerIGST)TaxPerIGST,  trimzero(TaxPerCGST)TaxPerCGST,trimzero(TaxPerSGST)TaxPerSGST,  trimzero(TaxPerCGST+TaxPerSGST+TaxPerIGST) TotalTaxPer, trimzero(st.UnitPrice)UnitPrice, UserName MakedBy,DATE_FORMAT(st.CheckedDate,'%d-%b-%Y')CheckedDate ,st.CheckedUserName CheckedBy,DATE_FORMAT(st.ApprovedDate,'%d-%b-%Y')ApprovedDate ,st.ApprovedUserName ApprovedBy FROM st_indent_detail st Left JOIN st_itemmaster sm ON st.itemid = sm.itemid  Left JOIN `st_itemmaster_group` itg ON itg.`ItemIDGroup`=sm.`ItemIDGroup` INNER JOIN st_categorytypemaster cat  ON cat.CategoryTypeID = sm.CategoryTypeID INNER JOIN st_subcategorytypemaster subcat ON subcat.SubCategoryTypeID = sm.SubCategoryTypeID  INNER JOIN st_nmstock  stn ON  stn.`ItemID`=st.`ItemId`  WHERE st.isactive=1  AND indenttype='SI' and st.FromLocationID in (0,1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36)   AND st.`dtEntry`>= '2022-04-01 00:00:00'   AND st.`dtEntry`<='2022-04-18 00:00:00'  GROUP BY IndentNo ORDER BY fromlocation,IndentNo,Itemname) t